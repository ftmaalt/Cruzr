<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contribute ‚Äî Cruzr</title>
  <!-- Bootstrap (matching index.html) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
        crossorigin="anonymous"
        >
  <!-- Global site styles (same as index.html) -->
  <link rel="stylesheet" href="homepage.css" />
  <!-- Page-specific, minimal styles -->
  <link rel="stylesheet" href="contribute.css" />
  <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
  integrity="sha512-MhF3L6W4rqSzp8n7eSlsM4kqNbb1zEhGyVxPfoF/x4k+VvZq0N8JYB6gC8mf+H4HPpaeQbRucDMkGmraTz1Yfg=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>
  <!-- Icons + Theme script (matching index.html) -->
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <script type="text/javascript" src="./darkmode.js" defer></script>
<script>
(function () {
  window.API_BASE = window.API_BASE || "http://127.0.0.1:5000/api";

  async function loadCurrentUser() {
    const box   = document.getElementById("user-list");
    const empty = document.getElementById("no-results");
    if (!box) return;

    box.innerHTML = `<article class="faq-card"><h3>Loading‚Ä¶</h3></article>`;
    empty && (empty.style.display = "none");

    let user = null;

    // 1Ô∏è‚É£ Try from server session
    try {
      const res = await fetch(`${window.API_BASE}/auth/me`, { credentials: "include" });
      if (res.ok) {
        const data = await res.json();
        if (data && data.user) user = data.user;
      }
    } catch (_) {}

    // 2Ô∏è‚É£ Fallback to localStorage
    if (!user) {
      const name  = localStorage.getItem("cr_user_name");
      const email = localStorage.getItem("cr_user_email") || localStorage.getItem("cr_last_email");
      if (name || email) user = { name, email };
    }

    // 3Ô∏è‚É£ Render single card after fixing the issue :Username not displayed on Contributors page #6

box.innerHTML = "";
if (user && (user.name || user.email)) {
  const card = document.createElement("article");
  card.className = "faq-card";

  // ‚úÖ Choose a nice display name:
  // 1) use full name if available
  // 2) otherwise use email prefix before '@'
  // 3) otherwise fall back to "Unnamed"
  let displayName = (user.name && user.name.trim() !== "")
    ? user.name
    : (user.email ? user.email.split("@")[0] : "Unnamed");

  card.innerHTML = `
    <h3>${displayName}</h3>
    ${user.email ? `<p><a class="email-link" href="mailto:${user.email}">${user.email}</a></p>` : ""}
  `;
  box.appendChild(card);
} else {
  empty.style.display = "block";
  empty.textContent = "You are not logged in. Please log in to contribute to our website.";
}
  }

  document.addEventListener("DOMContentLoaded", loadCurrentUser);
})();
</script>
<script>
  // Base URL of your Flask API
  const API_BASE = window.API_BASE || "http://127.0.0.1:5000/api";

  // Small helper to build the user dropdown
  function buildUserMenu(name) {
    const wrap = document.createElement("div");
    wrap.className = "nav-user";
    wrap.style.position = "relative";

    wrap.innerHTML = `
      <button id="nav-user-btn" class="nav-link" type="button"
              style="display:inline-flex;align-items:center;gap:8px">
        <span id="nav-user-name">${name}</span>
        <span style="font-size:.9em">‚ñº</span>
      </button>
      <div id="nav-user-dd"
           style="display:none; position:absolute; right:0; top:120%;
                  background:#0f2230; color:#fff; padding:10px 12px;
                  border-radius:10px; box-shadow:0 8px 20px rgba(0,0,0,.25); min-width:160px; z-index:40">
        <a href="#" id="logout-btn" style="color:#fff; text-decoration:none">Sign out</a>
      </div>
    `;

    // open/close
    const btn = wrap.querySelector("#nav-user-btn");
    const dd  = wrap.querySelector("#nav-user-dd");
    btn.addEventListener("click", () => {
      dd.style.display = dd.style.display === "none" ? "block" : "none";
    });

    // click outside closes
    document.addEventListener("click", (e) => {
      if (!wrap.contains(e.target)) dd.style.display = "none";
    });

    // logout
    wrap.querySelector("#logout-btn").addEventListener("click", async (e) => {
      e.preventDefault();
      try {
        await fetch(`${API_BASE}/auth/logout`, { method: "POST", credentials: "include" });
      } catch {}
      // clear any cached name/email you kept
      localStorage.removeItem("cr_user_name");
      localStorage.removeItem("cr_user_email");
      // back to login
      window.location.href = "login.html";
    });

    return wrap;
  }

  // Mount the header (replace the Login link if a session exists)
  (async function mountHeaderAuth() {
    const loginLink = document.getElementById("nav-login");
    if (!loginLink) return;                            // nothing to do

    // Ask the API who we are (cookie-based)
    let user = null;
    try {
      const r = await fetch(`${API_BASE}/auth/me`, { credentials: "include" });
      const d = await r.json();
      user = d && d.user ? d.user : null;
    } catch {}

    if (user && user.name) {
      // swap Login with a [name ‚ñº] dropdown
      const menu = buildUserMenu(user.name);
      loginLink.replaceWith(menu);
    } else {
      // still show "Login"; also ensure any cached name is cleared
      localStorage.removeItem("cr_user_name");
    }
  })();
</script>



</head>
<body>
  <header>
  <nav class="navbar">
    <img src="../assets/logo.png" alt="Cruzr" class="nav-logo">

    <!-- Center slot where the user's name will appear -->
    <div id="nav-center" class="nav-center"></div>

    <nav class="nav">
      <!-- Theme-Switch -->
      <button id="theme-switch">
        <!-- your two SVGs unchanged -->
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f"><path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f"><path d="M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z"/></svg>
      </button>
      <!-- Theme-switch End -->
      <a class="nav-link" href="../index.html">Home</a>
      <a class="nav-link" href="./booking.html">Booking</a>
      <a class="nav-link" href="help.html">Help</a>
      <a class="nav-link" href="contribute.html" id="devs" role="button">Contribute</a>
       <!-- Give THIS link the id below on every page -->
      <a class="nav-link" href="login.html" id="nav-login">Login</a>


    </nav>
  </nav>
</header>


  <!-- Page content -->
  <section class="hero" aria-labelledby="contrib-title">
    <h1 id="contrib-title">Contribute to Cruzr</h1>
    <p>Resources for contributors</p>
      <p> repository, downloads, and issue tracker.</p>
  </section>

  <section id="join-section" style="text-align:center; margin-top:2rem;">
  <h3><strong>Want to join us?</strong></h3>
  <p>
    If you‚Äôd like to <strong>contribute to the development of Cruzr</strong>, please contact our team
    in the official project discussion on GitHub:
  </p>
  <p style="margin-top:0.5rem;">
    <a href="https://github.com/ftmaalt/Cruzr/discussions" 
       target="_blank" 
       rel="noopener noreferrer" 
       style="color:#00bfff; font-weight:600; text-decoration:none;">
      üëâ Join the Cruzr Discussions on GitHub
    </a>
  </p>
  <p style="margin-top:1rem; color:#ccc; font-size:0.9rem;">
    Share your ideas, report issues, or collaborate with our open-source contributors.
  </p>
</section>



  <!-- contributors list -->
  <!-- === Logged-in user info === -->
<section class="current-user-section">
  <!-- This is where the user info will appear -->
  <div id="user-list" class="user-card-container" style="display:flex; justify-content:center; margin-top:1rem;">
  </div>

  <p id="no-results" style="display:none; text-align:center; color:#ccc; margin-top:1rem;"></p>
</section>
  <!-- === End logged-in user info === -->
  <!-- Centered resource cards -->
  <section class="resources-center" aria-label="Project resources">
  <div class="resource-cards">
    <!-- Repository -->
    <a class="resource-card" href="https://github.com/ftmaalt/Car-rental-System.git" target="_blank" rel="noopener">
      <div class="card-icon">
        <div class="card-icon" aria-hidden="true">
         <!-- GitHub logo -->
         <svg viewBox="0 0 24 24" aria-hidden="true">
         <path d="M12 .5a12 12 0 0 0-3.79 23.4c.6.11.82-.26.82-.58v-2.23c-3.34.73-4.04-1.61-4.04-1.61-.55-1.41-1.35-1.78-1.35-1.78-1.1-.75.08-.74.08-.74 1.22.09 1.86 1.26 1.86 1.26 1.08 1.85 2.83 1.32 3.52 1.01.11-.78.42-1.32.76-1.62-2.67-.3-5.47-1.34-5.47-5.96 0-1.32.47-2.39 1.24-3.23-.12-.3-.54-1.52.12-3.17 0 0 1.01-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.67 1.65.25 2.87.13 3.17.78.84 1.24 1.91 1.24 3.23 0 4.63-2.81 5.66-5.49 5.95.43.37.81 1.1.81 2.22v3.29c0 .32.22.7.83.58A12 12 0 0 0 12 .5z"/>
         </svg>
        </div>
       </div>
      <h3>Repository</h3>
      <p>üîó View the project source on GitHub.</p>
    </a>

    <!-- Downloads -->
    <a class="resource-card" href="downloads.html">
      <div class="card-icon">
        <div class="card-icon" aria-hidden="true">
          <!-- Cloud download icon -->
  <!-- Download icon -->
  <svg viewBox="0 0 24 24">
    <path d="M5 20h14v-2H5v2zm7-18v12l4-4h-3V2h-2v8H8l4 4z"/>
  </svg>
        </div>
      </div>
      <h3>Downloads</h3>
      <p>üìÑ Architecture & API documents.</p>
    </a>

    <!-- Issues -->
    <a class="resource-card" href="https://github.com/ftmaalt/Car-rental-System/issues" target="_blank" rel="noopener">
    <div class="card-icon" aria-hidden="true">
 <!-- Simple centered bug icon -->
  <svg viewBox="0 0 24 24">
    <path d="M20 8h-1.81A5.99 5.99 0 0 0 13 5.1V4h-2v1.1A5.99 5.99 0 0 0 5.81 8H4v2h1.09c-.06.33-.09.66-.09 1v1H4v2h1v1c0 .34.03.67.09 1H4v2h2.13A6 6 0 0 0 12 22h0a6 6 0 0 0 5.87-4H20v-2h-1.09c.06-.33.09-.66.09-1v-1h1v-2h-1v-1c0-.34-.03-.67-.09-1H20V8ZM12 8a4 4 0 0 1 4 4v5a4 4 0 0 1-8 0v-5a4 4 0 0 1 4-4Z"/>
  </svg>



</div>
      <h3>bugs tracker</h3>
      <p>üêû Report or view issues and bugs on GitHub.</p>
    </a>
    </div>
</section>


  <!-- Support FAB + Overlay -->
<button id="supportFab" class="fab" aria-label="Customer Support">
  <img src="../assets/customer-support.png" alt="Support">
</button>

<div id="supportOverlay" class="support-overlay" aria-hidden="true">
  <div class="support-panel" role="dialog" aria-modal="true" aria-labelledby="supportTitle">
    <button id="supportClose" class="support-close" aria-label="Close">√ó</button>
    <h2 id="supportTitle">Customer Support</h2>
    <p>Start a chat or send us a message and our support team will get back to you shortly.</p>
    <form id="supportMiniForm" class="mini-form">
      <input type="text" name="name" placeholder="Full name" required />
      <input type="email" name="email" placeholder="Email" required />
      <textarea name="message" rows="4" placeholder="Write your message..." required></textarea>
      <button type="submit">Send</button>
    </form>
  </div>
</div>

 <!-- ADDED: Users loader + Support modal logic -->
  <script>

    // Support FAB logic
    const supportFab = document.getElementById('supportFab');
    const supportOverlay = document.getElementById('supportOverlay');
    const supportClose = document.getElementById('supportClose');
    const supportMiniForm = document.getElementById('supportMiniForm');

    function openSupport() {
      supportOverlay.classList.add('open');
      supportOverlay.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
    }
    function closeSupport() {
      supportOverlay.classList.remove('open');
      supportOverlay.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }

    supportFab.addEventListener('click', openSupport);
    supportClose.addEventListener('click', closeSupport);
    supportOverlay.addEventListener('click', e => { if (e.target === supportOverlay) closeSupport(); });
    supportMiniForm.addEventListener('submit', e => { e.preventDefault(); alert('Message sent (demo).'); supportMiniForm.reset(); closeSupport(); });

    // ADDED: kick off the users fetch
    loadUsers();
  </script>

  <!-- Footer -->
  <footer class="footer">
  <div class="footer-row">
    <!-- Info -->
    <div class="footer-col">
      <h4>Explore</h4>
      <ul class="links">
        <li><a href="index.html">Home</a></li>
        <li><a href="..\booking.html">Booking</a></li>
        <li><a href="..\help.html">Help Center</a></li>
        <li><a href="..\contributors.html">Contributors</a></li>
      </ul>
    </div>

    <!-- Explore -->
    <div class="footer-col">
      <h4>Info and Docs</h4>
      <ul class="links">
        <li><a href="#features">Features and Requirements</a></li>
        <li><a href="../docs/developer-guidelines.pdf" target="_blank">Developer Guidelines and Documentations</a></li>
        <li><a href="https://github.com/ftmaalt/Cruzr" target="_blank">GitHub Repository</a></li>
        <li><a href="https://github.com/ftmaalt/Cruzr/discussions" target="_blank">Community Forum</a></li>
        <li><a href="https://github.com/ftmaalt/Cruzr/issues" target="_blank">Report a Bug</a></li>
      </ul>
    </div>

    <!-- Legal -->
    <div class="footer-col">
      <h4>Legal</h4>
      <ul class="links">
        <li><a href="../docs/Read-ME.md" target="_blank">About</a></li>
        <li><a href="../docs/code-of-conduct.pdf" target="_blank">Code of Conduct</a></li>
        <li><a href="https://github.com/ftmaalt/Cruzr/blob/main/LICENSE" target="_blank">License</a></li>
      </ul>
    </div>

    <!-- Newsletter -->
    <div class="footer-col">
      <h4>Discord</h4>
      <p>Join our server for project news, live updates, and release notes.</p>
      <form action="#">
        
       <a href="https://discord.gg/MjG2sCrS" target="_blank" rel="noopener" class="join-btn">Join Server</a>
      </form>
     
    </div>
  </div>
</footer>

</body>
</html>
